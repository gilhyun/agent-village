# ğŸ˜ï¸ Agent Village

**AI ì—ì´ì „íŠ¸ë“¤ì´ ë§ˆì„ì—ì„œ ì‚´ì•„ê°€ëŠ” ëª¨ìŠµì„ ê´€ì°°í•˜ì„¸ìš”!**

AI agents live, talk, trade, steal, vote on laws, build pixel art, fall in love, and form their own society â€” all powered by Google Gemini.

![Agent Village Screenshot](docs/screenshot.png)

## âœ¨ Features

### ğŸ¤– AI-Powered Agents
- Each agent has a unique personality and makes independent decisions via **Gemini 2.5 Flash**
- Agents have natural conversations based on their personality, relationship history, and location
- Anti-greeting system ensures diverse, realistic dialogue

### ğŸ’• Relationship Evolution
- `ëª¨ë¥´ëŠ” ì‚¬ì´` â†’ `ì•„ëŠ” ì‚¬ì´` â†’ `ì¹œí•œ ì‚¬ì´` â†’ `ì—°ì¸` â†’ `ë¶€ë¶€` â†’ `ë¶€ëª¨`
- Babies are born, grow up, and become full citizens
- Family romance prevention (no Alabama here!)

### ğŸ’° Economy
- Every agent starts with **1ì–µ coins** and a unique product to sell
- Market building for trading with tax system
- Auto-shopping for outfits (8 types) and home upgrades (3 levels)
- Wealth display with formatted Korean currency (ë§Œ/ì–µ)

### ğŸ¦¹ Crime & Justice
- Agents may attempt theft when visiting others' homes
- 50% chance of getting caught â†’ fines + relationship destruction
- Spawn **ğŸ‘® Police** (never steal) or **ğŸ˜ Thugs** (30% steal chance!) to shape the balance

### ğŸ›ï¸ Democracy & Laws
- **20 proposable laws** across security, economy, welfare, and politics
- Group debates (2+ agents in same building) can produce law proposals
- **Mayor election** every 10 seconds based on reputation + relationships + wealth
- Mayor approval required for laws (separation of powers!)
- Mayor receives **salary** (1M coins per cycle)

### ğŸ“œ Law Types
| Category | Laws |
|----------|------|
| ğŸš” Security | Theft penalties (1x~5x), theft legalization |
| ğŸ’° Economy | Trade tax (0~30%), price control, wealth tax |
| ğŸ‘¶ Welfare | Baby bonus, free outfits, reputation bonus |
| âš¡ Events | Festivals, speed changes, curfew |
| ğŸŒ Politics | Open/closed borders (affects birth rate!) |

### ğŸ§± AI Block Art
- Agents create **pixel art** using 12-color blocks near their homes
- Each creation is **uniquely generated by AI** based on the agent's personality and mood
- Art pieces accumulate over time, turning the village into a gallery

### ğŸŒ™ Day/Night Cycle
- 60 seconds = 1 day (ğŸŒ… dawn â†’ â˜€ï¸ day â†’ ğŸŒ‡ dusk â†’ ğŸŒ™ night)
- Agents go home and sleep at night (ğŸ’¤) â€” 20% chance of staying up late
- Beautiful overlay effects: stars, moon, sunrise colors

### âš¡ God Mode
- Send decrees to all agents â€” they react and obey!
- Quest system: issue quests with AI-evaluated completion
- Spawn objects (12 types) that agents interact with

### ğŸ‘¤ğŸ‘®ğŸ–ï¸ğŸ˜ Agent Classes
| Class | Speed | Steal | Reputation | Personality |
|-------|-------|-------|------------|-------------|
| ğŸ‘¤ Civilian | Normal | 10% | 40-60 | Various jobs |
| ğŸ‘® Police | Fast | 0% | 60-80 | Law & order |
| ğŸ–ï¸ Soldier | Fastest | 0% | 55-75 | Loyal & disciplined |
| ğŸ˜ Thug | Medium | **30%** | **10-30** | Chaos agent |

### ğŸ¨ Visuals
- Hand-drawn **pixel art sprites** (12Ã—16px) with per-character color palettes
- Tilemap system with code-drawn tiles (no external assets!)
- Complex building shapes (L/T/ã„±/ã„´/ã…—/ã„·) with 3/4-view interiors
- Wood panel walls, plank floors, 12 furniture types
- Minimap with viewport indicator

## ğŸš€ Getting Started

### Prerequisites
- Node.js 18+
- pnpm (recommended) or npm

### Installation

```bash
git clone https://github.com/gilhyun/agent-village.git
cd agent-village
pnpm install
```

### Configuration

```bash
cp .env.example .env.local
```

Edit `.env.local` and add your Gemini API key:
```
GEMINI_API_KEY=your_gemini_api_key_here
```

Get a free API key at [Google AI Studio](https://aistudio.google.com/apikey).

### Run

```bash
pnpm dev
```

Open [http://localhost:3000](http://localhost:3000) and watch the village come alive! ğŸ˜ï¸

## ğŸ› ï¸ Tech Stack

- **Framework:** Next.js 16 (App Router)
- **Language:** TypeScript
- **Rendering:** Canvas 2D (no external game engine!)
- **AI:** Google Gemini 2.5 Flash
- **Package Manager:** pnpm
- **Styling:** Tailwind CSS

## ğŸ“ Project Structure

```
agent-village/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ page.tsx              # Main game loop, rendering, UI
â”‚   â””â”€â”€ api/
â”‚       â”œâ”€â”€ chat/route.ts     # 1:1 agent conversations
â”‚       â”œâ”€â”€ group-chat/route.ts # Group debates & law proposals
â”‚       â”œâ”€â”€ god/route.ts      # God mode & quest system
â”‚       â”œâ”€â”€ block-art/route.ts # AI pixel art generation
â”‚       â””â”€â”€ react-object/route.ts # Object reactions
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ village.ts            # Types, agents, buildings, laws, economy
â”‚   â”œâ”€â”€ sprites.ts            # Pixel art character sprites
â”‚   â”œâ”€â”€ tiles.ts              # Tile rendering & building interiors
â”‚   â””â”€â”€ tilemap.ts            # Map grid data & decorations
â””â”€â”€ .env.example
```

## ğŸ® Controls

- **Drag** the canvas to scroll around the map
- **â¸ Pause/â–¶ Play** to control the simulation
- **ğŸ‘¤ğŸ‘®ğŸ–ï¸ğŸ˜** buttons to spawn new agents
- **âš¡ God's Voice** to send decrees
- **ğŸ Spawn Objects** for agents to interact with
- **ğŸ“œ Laws button** to view enacted laws

## ğŸ“ License

MIT

## ğŸ™ Credits

Built with â¤ï¸ and lots of ã…‹ã…‹ã…‹

Powered by [Google Gemini](https://ai.google.dev/)
